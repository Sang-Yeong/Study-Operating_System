[운영체제- 3. 이중 모드 및 하드웨어 보호]

# 이중모드: 사용자의 작업으로 인해 다른 사용자의 작업에 영향을 받는 문제에 대한 보호 장치
- 사용자 모드: 단순한 사용자 프로그램을 작동시키는 모드
- 관리자 모드: 시스템이 내리는 명령어, 프로그램을 작동시킬 때 작동하는 모드
	- 특권 명령어: 사용자 프로그램이 사용할 수 없는 명령어 (ex. Stop-컴퓨터 강제 종료)

- 모드 판단 방법: 레지스터의 플래그 0,1
- 상태에 따른 모드
	- 사용자 모드: 사용자 프로그램을 실행하는 경우
	- 관리자 모드: 운영체제 서비스가 실행될 때, 하드웨어/ 소프트웨어 인터럽트가 발생할 때

- 이중모드 역할 실행 과정
1. 프로그램 실행
2. 프로그램이 메모리에 적재됨 (적재: 물건이나 짐을 선박, 차량 따위의 운송 수단에 실음)
3. 

1)

```
<사용자모드> 에서 실행중
	I/O관련 명령어 들어오게되면
<관리자모드>에서 하드웨어 인터럽트 발생시킴
	작업 마침
<사용자모드>
```

2

```
<사용자모드> 에서 실행중
	운영체제 관련 명령어가 필요할 경우
<관리자모드>
	--- 작업마침
<사용자모드>
```

- 하드웨어 보호
	1) 입출력장치(I/O) 보호
    	- 사용자의 잘못된 입출력 명령어 제어
    	- 다른 사용자와 동시 사용하는 것을 막기위한 입출력 명령 - "특권 명령어: IN, OUT"

	2) 메모리 보호
    	- 다른 사용자가 메모리 또는 운영체제 영역 메모리를 접근할 경우를 막기 위한 작업
    	- 해킹에 관련된 부분이 많이 작용
    	- MMU(Memory Management Unit)를 두어 다른 메모리 영역 침범하는 것을 감시하는 장치
    	MMU: 각 사용자마다 할당 받을 수 있는 메모리 공간의 영역을 정하여 다른 사용자는 침범을 할 수 없게 만든다.
        MMU는  이러한 설정은 특권명령어로 운영체제만 바꿀 수 있음.

	3) CPU 보호
    	- 한 사용자가 CPU 시간을 독점하는 것을 막는다.
    	- CPU 시간을 독점하게 되면 다른 사용자는 프로그램 실행이 불가하므로 Timer를 두어 일정 시간 경과시 타이머 인터럽트를 발생시켜 운영체제가 다른 프로그램으로 강제 전환하는 방법



출처: https://copycode.tistory.com/47?category=740133 [ITstory]